{"ast":null,"code":"import { durationFormatter } from 'human-readable';\nconst formatterDefault = durationFormatter();\nconst formatterYMD = durationFormatter({\n  allowMultiples: ['y', 'mo', 'd']\n});\n\n// Type Definitions\n\n// Exported Funcitons\n\nexport const getPreviousPlayers = results => {\n  const previousPlayers = results.flatMap(x => x.players);\n  return [...new Set(previousPlayers)].sort((a, b) => a.localeCompare(b));\n};\nexport const getLeaderboard = results => {\n  const players = getPreviousPlayers(results);\n  return players.map(x => getLeaderboardEntryForPlayer(results, x)).sort(\n  // (a, b) => b.avg - a.avg\n\n  // i-o-g\n  (a, b) => b.avg * 1000 + b.wins + b.losses - (a.avg * 1000 + a.wins + a.losses));\n};\nexport const getGeneralFacts = results => {\n  const now = Date.now();\n  const gameEndDatesInMilliseconds = results.map(x => Date.parse(x.end));\n  const gameDurationsInMilliseconds = results.map(x => Date.parse(x.end) - Date.parse(x.start));\n  return {\n    totalGames: results.length,\n    lastPlayed: results.length ? `${formatterYMD(now - Math.max(...gameEndDatesInMilliseconds))} ago` : \"n/a\",\n    shortestGame: results.length ? formatterDefault(Math.min(...gameDurationsInMilliseconds)) : \"n/a\",\n    longestGame: results.length ? formatterDefault(Math.max(...gameDurationsInMilliseconds)) : \"n/a\"\n  };\n};\n//comment in this line to play and get the pointfunfactsworking\n// export const getPointFunFacts = (results: GameResult[]): PointFunFacts[] => {\n//     const players = getPreviousPlayers(results);\n//     return players.map(\n//         x => getPointEntryForPlayer(results, x)\n//     )\n// }\n\nexport const getPointFunFacts = (results, playerPoints) => {\n  console.log(results);\n  const playerTotalPoints = results.map(x => {\n    points += Number(x.playerPoints);\n  });\n  const playerGames = results.filter(x => x.players.some(y => y === player)).length;\n  return {\n    avg: playerGames > 0 ? Number(playerTotalPoints) / playerGames : 0,\n    name: player\n  };\n};\n\n//When testing rest of app comment below code in - to harc code the get point fun facts. \n// export const getPointFunFacts = (results: GameResult[]): PointFunFacts[] => {\n//     return (\n//         [\n//             {\n//                 avg: 10\n//                 , name: \"Melisa\"\n//             }\n//             , {\n//                 avg: 25\n//                 , name: \"HAiley\"\n//             }\n//         ]\n//     )\n\n// }\n\n// internal functions\n\nconst getLeaderboardEntryForPlayer = (results, player) => {\n  const playerWins = results.filter(x => x.winner === player).length;\n  const playerGames = results.filter(x => x.players.some(y => y === player)).length;\n  return {\n    wins: playerWins,\n    losses: playerGames - playerWins,\n    avg: playerGames > 0 ? playerWins / playerGames : 0,\n    name: player\n  };\n};\nconst getPointEntryForPlayer = (results, player, points) => {\n  const playerTotalPoints = results.map(x => {\n    points += Number(x.playerPoints);\n  });\n  const playerGames = results.filter(x => x.players.some(y => y === player)).length;\n  // console.log(playerTotalPoints)\n  return {\n    avg: playerGames > 0 ? Number(playerTotalPoints) / playerGames : 0,\n    name: player\n  };\n};","map":{"version":3,"names":["durationFormatter","formatterDefault","formatterYMD","allowMultiples","getPreviousPlayers","results","previousPlayers","flatMap","x","players","Set","sort","a","b","localeCompare","getLeaderboard","map","getLeaderboardEntryForPlayer","avg","wins","losses","getGeneralFacts","now","Date","gameEndDatesInMilliseconds","parse","end","gameDurationsInMilliseconds","start","totalGames","length","lastPlayed","Math","max","shortestGame","min","longestGame","getPointFunFacts","playerPoints","console","log","playerTotalPoints","points","Number","playerGames","filter","some","y","player","name","playerWins","winner","getPointEntryForPlayer"],"sources":["C:/Users/Melisa Soldner/OneDrive - Madison College/Documents/GitHub/2024-spring-adf-fe/tca-trash-pandas/src/GameResults.ts"],"sourcesContent":["import { durationFormatter } from 'human-readable';\r\n\r\nconst formatterDefault = durationFormatter();\r\nconst formatterYMD = durationFormatter({\r\n    allowMultiples: ['y', 'mo', 'd']\r\n})\r\n\r\n// Type Definitions\r\n\r\nexport type GameResult = {\r\n    winner: string;\r\n    players: string[];\r\n    start: string;\r\n    end: string;\r\n    playerPoints: [string, number][];\r\n};\r\n\r\nexport type LeaderboardEntry = {\r\n    wins: number;\r\n    losses: number;\r\n    avg: number;\r\n    name: string;\r\n};\r\n\r\nexport type GeneralFacts = {\r\n    totalGames: number;\r\n    lastPlayed: string;\r\n    shortestGame: string;\r\n    longestGame: string;\r\n};\r\n\r\nexport type PointFunFacts = {\r\n    // totalPoints: number;\r\n    // totalGames: number;\r\n    //Not sure I need those two lines above as i am only using the bottom two on the leaderboard\r\n    avg: number;\r\n    name: string;\r\n};\r\n\r\n// Exported Funcitons\r\n\r\nexport const getPreviousPlayers = (results: GameResult[]) => {\r\n\r\n    const previousPlayers = results.flatMap(\r\n        x => x.players\r\n    );\r\n\r\n    return [\r\n        ...new Set(previousPlayers)\r\n    ].sort(\r\n        (a, b) => a.localeCompare(b)\r\n    );\r\n};\r\n\r\nexport const getLeaderboard = (results: GameResult[]): LeaderboardEntry[] => {\r\n    const players = getPreviousPlayers(results);\r\n\r\n    return players.map(\r\n        x => getLeaderboardEntryForPlayer(results, x)\r\n    ).sort(\r\n        // (a, b) => b.avg - a.avg\r\n\r\n        // i-o-g\r\n        (a, b) => (b.avg * 1000 + b.wins + b.losses) - (a.avg * 1000 + a.wins + a.losses)\r\n    );\r\n};\r\n\r\nexport const getGeneralFacts = (results: GameResult[]): GeneralFacts => {\r\n    const now = Date.now();\r\n    const gameEndDatesInMilliseconds = results.map(\r\n        x => Date.parse(x.end)\r\n    );\r\n\r\n    const gameDurationsInMilliseconds = results.map(\r\n        x => Date.parse(x.end) - Date.parse(x.start)\r\n    );\r\n    return {\r\n        totalGames: results.length\r\n        , lastPlayed:\r\n            results.length\r\n                ? `${formatterYMD(\r\n                    now - Math.max(...gameEndDatesInMilliseconds)\r\n                )} ago`\r\n                : \"n/a\"\r\n        , shortestGame:\r\n            results.length\r\n                ? formatterDefault(\r\n                    Math.min(...gameDurationsInMilliseconds)\r\n                ) as string\r\n                : \"n/a\"\r\n        , longestGame:\r\n            results.length\r\n                ? formatterDefault(\r\n                    Math.max(...gameDurationsInMilliseconds)\r\n                ) as string\r\n                : \"n/a\"\r\n    };\r\n};\r\n//comment in this line to play and get the pointfunfactsworking\r\n// export const getPointFunFacts = (results: GameResult[]): PointFunFacts[] => {\r\n//     const players = getPreviousPlayers(results);\r\n//     return players.map(\r\n//         x => getPointEntryForPlayer(results, x)\r\n//     )\r\n// }\r\n\r\nexport const getPointFunFacts = (results: GameResult[], playerPoints): PointFunFacts[] => {\r\n    console.log(results)\r\n    const playerTotalPoints = results.map(\r\n        (x) => {\r\n            points += Number(x.playerPoints)\r\n        }\r\n    )\r\n    const playerGames = results.filter(\r\n        x => x.players.some(\r\n            y => y === player\r\n        )\r\n    ).length;\r\n\r\n\r\n\r\n    return {\r\n        avg: playerGames > 0\r\n            ? Number(playerTotalPoints) / playerGames\r\n            : 0\r\n        , name: player\r\n    };\r\n\r\n\r\n}\r\n\r\n//When testing rest of app comment below code in - to harc code the get point fun facts. \r\n// export const getPointFunFacts = (results: GameResult[]): PointFunFacts[] => {\r\n//     return (\r\n//         [\r\n//             {\r\n//                 avg: 10\r\n//                 , name: \"Melisa\"\r\n//             }\r\n//             , {\r\n//                 avg: 25\r\n//                 , name: \"HAiley\"\r\n//             }\r\n//         ]\r\n//     )\r\n\r\n// }\r\n\r\n// internal functions\r\n\r\nconst getLeaderboardEntryForPlayer = (results: GameResult[], player: string): LeaderboardEntry => {\r\n\r\n    const playerWins = results.filter(x => x.winner === player).length;\r\n    const playerGames = results.filter(\r\n        x => x.players.some(\r\n            y => y === player\r\n        )\r\n    ).length;\r\n\r\n    return {\r\n        wins: playerWins\r\n        , losses: playerGames - playerWins\r\n        , avg: playerGames > 0\r\n            ? playerWins / playerGames\r\n            : 0\r\n        , name: player\r\n    };\r\n};\r\n\r\nconst getPointEntryForPlayer = (results: GameResult[], player: string, points: number): PointFunFacts => {\r\n    const playerTotalPoints = results.map(\r\n        (x) => {\r\n            points += Number(x.playerPoints)\r\n        }\r\n    )\r\n    const playerGames = results.filter(\r\n        x => x.players.some(\r\n            y => y === player\r\n        )\r\n    ).length;\r\n    // console.log(playerTotalPoints)\r\n    return {\r\n        avg: playerGames > 0\r\n            ? Number(playerTotalPoints) / playerGames\r\n            : 0\r\n        , name: player\r\n    };\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}